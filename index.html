<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b1020" />
  <title>Lumina â€” Tienda</title>

  <!-- Fuente opcional (no bloquea render, display=swap) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Onest:wght@400;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="bg-aurora" aria-hidden="true"></div>

  <header class="topbar">
    <button class="logoBtn" id="logoBtn" aria-label="Inicio">
      <span class="logoDot" aria-hidden="true"></span>
      <span class="logoText">Lumina</span>
      <span class="logoTag">fashion</span>
    </button>

    <button class="iconBtn" id="cartBtn" aria-label="Abrir carrito">
      <span class="icon">ðŸ›’</span>
      <span class="pillCount" id="cartCount" aria-label="Cantidad en carrito">0</span>
    </button>
  </header>

  <main class="container">
    <section class="hero">
      <h1 class="heroTitle">Moda y accesorios</h1>
      <p class="heroSub">RÃ¡pido, colorido y listo para tu Android.</p>
    </section>

    <section class="searchRow" aria-label="Buscar productos">
      <form class="searchForm" id="searchForm" role="search">
        <input
          id="searchInput"
          class="searchInput"
          type="search"
          inputmode="search"
          autocomplete="off"
          placeholder="Buscar (nombre, categorÃ­a, descripciÃ³n)â€¦"
          aria-label="Buscar"
        />
        <button class="btn btnPrimary" type="submit" aria-label="Buscar">Buscar</button>
      </form>

      <button class="btn btnSoft" id="filtersToggle" aria-expanded="false" aria-controls="filtersPanel">
        Filtros
      </button>
    </section>

    <section id="filtersPanel" class="filtersPanel" hidden>
      <div class="filtersGrid">
        <label class="field">
          <span class="fieldLabel">CategorÃ­a</span>
          <select id="categorySelect" class="select" aria-label="Filtrar por categorÃ­a">
            <option value="">Todas</option>
            <option value="manillas">Manillas</option>
            <option value="pulseras">Pulseras</option>
            <option value="anillos">Anillos</option>
            <option value="collares">Collares</option>
          </select>
        </label>

        <label class="field">
          <span class="fieldLabel">Orden</span>
          <select id="sortSelect" class="select" aria-label="Ordenar productos">
            <option value="featured_recent">Destacados + recientes</option>
            <option value="price_asc">Precio: menor a mayor</option>
            <option value="price_desc">Precio: mayor a menor</option>
            <option value="name_asc">Nombre: Aâ€“Z</option>
            <option value="name_desc">Nombre: Zâ€“A</option>
          </select>
        </label>

        <label class="field inline">
          <input id="featuredOnly" type="checkbox" class="checkbox" />
          <span>Solo destacados</span>
        </label>

        <label class="field">
          <span class="fieldLabel">Precio mÃ¡ximo (COP)</span>
          <input
            id="maxPrice"
            class="input"
            type="number"
            inputmode="numeric"
            placeholder="Ej: 120000"
            min="0"
            step="1000"
            aria-label="Precio mÃ¡ximo"
          />
        </label>

        <button class="btn btnGhost" id="clearFilters" type="button">Limpiar filtros</button>
      </div>
    </section>

    <section class="listHeader">
      <div class="tiny" id="resultsMeta" aria-live="polite"></div>
      <div class="tiny muted">Tip: escribe <b>admin</b> en el buscador ðŸ˜‰</div>
    </section>

    <section id="statusBar" class="statusBar" aria-live="polite">
      <div class="loadingDot" aria-hidden="true"></div>
      <span id="statusText">Cargando productosâ€¦</span>
    </section>

    <section id="emptyState" class="emptyState" hidden>
      <div class="emptyIcon" aria-hidden="true">ðŸ«§</div>
      <div class="emptyTitle">No hay resultados</div>
      <div class="emptySub">Prueba con otra bÃºsqueda o limpia los filtros.</div>
    </section>

    <section id="grid" class="grid" aria-label="Listado de productos"></section>

    <footer class="footer">
      <span>Â© <span id="year"></span> Lumina</span>
      <span class="dotSep" aria-hidden="true">â€¢</span>
      <span class="muted">Hecho para mÃ³vil</span>
    </footer>
  </main>

  <!-- Drawer Carrito -->
  <aside id="cartDrawer" class="drawer" aria-hidden="true" aria-label="Carrito">
    <div class="drawerBackdrop" id="drawerBackdrop" aria-hidden="true"></div>

    <div class="drawerPanel" role="dialog" aria-modal="true" aria-label="Carrito de compras">
      <header class="drawerTop">
        <div class="drawerTitle">Carrito</div>
        <button class="iconBtn" id="closeCart" aria-label="Cerrar carrito">âœ•</button>
      </header>

      <div id="cartItems" class="cartItems" aria-label="Items del carrito"></div>

      <div class="cartTotals" aria-label="Totales">
        <div class="row">
          <span class="muted">Subtotal</span>
          <strong id="subtotal">0</strong>
        </div>
        <div class="row">
          <span class="muted">EnvÃ­o</span>
          <strong id="shipping">0</strong>
        </div>
        <div class="row totalRow">
          <span>Total</span>
          <strong id="total">0</strong>
        </div>

        <div class="cartActions">
          <button class="btn btnGhost" id="clearCart" type="button">Vaciar</button>
          <button class="btn btnPrimary" id="checkout" type="button">Finalizar compra</button>
        </div>
        <div class="tiny muted">EnvÃ­o fijo 12.000 COP â€¢ Gratis desde 150.000 COP</div>
      </div>
    </div>
  </aside>

  <!-- Modal Producto -->
  <div id="productModal" class="modal" hidden aria-hidden="true">
    <div class="modalBackdrop" id="modalBackdrop" aria-hidden="true"></div>
    <div class="modalPanel" role="dialog" aria-modal="true" aria-label="Detalle del producto" tabindex="-1">
      <header class="modalTop">
        <div class="modalTitle" id="modalTitle">Producto</div>
        <button class="iconBtn" id="closeModal" aria-label="Cerrar">âœ•</button>
      </header>

      <div class="modalBody">
        <div class="modalMedia">
          <img id="modalImg" alt="" loading="lazy" decoding="async" />
        </div>

        <div class="modalInfo">
          <div class="badges" id="modalBadges"></div>
          <p class="desc" id="modalDesc"></p>

          <div class="variantRow">
            <label class="field">
              <span class="fieldLabel">Talla</span>
              <select id="modalSize" class="select" aria-label="Seleccionar talla"></select>
            </label>

            <label class="field">
              <span class="fieldLabel">Color</span>
              <select id="modalColor" class="select" aria-label="Seleccionar color"></select>
            </label>
          </div>

          <div class="priceRow">
            <div class="priceBlock">
              <div class="muted tiny">Precio</div>
              <div class="priceLine">
                <strong class="price" id="modalPrice"></strong>
                <span class="strike muted" id="modalStrike" hidden></span>
              </div>
            </div>

            <div class="qtyBlock">
              <div class="muted tiny">Cantidad</div>
              <div class="qtyCtrl" aria-label="Cantidad">
                <button class="iconBtn" id="qtyMinus" aria-label="Disminuir">âˆ’</button>
                <span id="qtyValue" class="qtyValue" aria-label="Cantidad actual">1</span>
                <button class="iconBtn" id="qtyPlus" aria-label="Aumentar">+</button>
              </div>
            </div>
          </div>

          <div class="modalActions">
            <button class="btn btnSoft" id="addToCart">Agregar al carrito</button>
            <button class="btn btnPrimary" id="buyNow">Comprar ahora</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toastHost" class="toastHost" aria-live="polite" aria-relevant="additions"></div>

  <script type="module" src="./supabaseClient.js"></script>
  <script type="module" src="./app.js"></script>
</body>
</html>
